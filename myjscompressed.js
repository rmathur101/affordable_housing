$(document).ready(function(){function e(e,t){var i=[];for(d in e){var o=e[d];o.Location&&o.Location.length>0&&t(o)&&i.push(o)}return i}function t(){var e=this.markerID,t=s[e],i="";t["Project Name"]&&(i+="<div><b>Project Name: </b>"+t["Project Name"]+"</div>"),t.Address&&t["Zip Code"]&&(i+="<div><b>Address: </b>"+t.Address+"Austin, TX"+t["Zip Code"]+"</div>"),t.Owner&&(i+="<div><b>Owner: </b>"+t.Owner+"</div>"),t.Developer&&(i+="<div><b>Developer: </b>"+t.Developer+"</div>"),t.Status&&(i+="<div><b>Status: </b>"+t.Status+"</div>"),t["Housing Type"]&&(i+="<div><b>Housing Type: </b>"+t["Housing Type"]+"</div>"),t["Unit Type"]&&(i+="<div><b>Unit Type: </b>"+t["Unit Type"]+"</div>"),t["Distance to Bus Stop"]&&(i+="<div><b>Distance to Bus Stop:</b> "+t["Distance to Bus Stop Date"]+"</div>"),t["Affordability Expiration Date"]&&(i+="<div><b>Affordability Expiration Date: </b>"+t["Affordability Expiration Date"]+"</div>"),t["City Funded Amount"]&&(i+="<div><b>City Funded Amount: </b>"+t["City Funded Amount"]+"</div>"),$("#marker-info").html(i)}function i(i,o,r){var n=new L.FeatureGroup;if(r)d=e(i,r);else var d=i;s=d;var c=0;for(var p in d){var u=d[p];if(u.Location&&u.Location.length>0){var v=u.Location.match(/\d*\.\d*/g),b=L.marker([parseFloat(v[0]),-parseFloat(v[1])],{icon:a()});b.markerID=p,b.on("click",t),n.addLayer(b),c+=1}}return o.addLayer(n),$("#AFI-Total").text(c),n}function o(e,t){t.removeLayer(e)}function a(e){return r()}function r(e){return L.AwesomeMarkers.icon({markerColor:"blue"})}var n=null,s=[],c=L.map("mapid").setView([30.310768,-97.674724],11);L.tileLayer("https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}",{attribution:'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="http://mapbox.com">Mapbox</a>',maxZoom:18,id:"mapbox.streets",accessToken:"pk.eyJ1Ijoicm1hdGh1cjEwMSIsImEiOiJjajg3a3I0cjIwb2lqMndtdGVtaWx1ZjZrIn0.iEel0XmzyrU4fz78lEQ3GQ"}).addTo(c),L.AwesomeMarkers.Icon.prototype.options.prefix="ion";var p=JSON.parse(jsonAHIObject);n=i(p,c),$("#select-district").on("change",function(){function e(e){return function(t){return t["Council District"]==parseInt(e)}}console.log(this.value),o(n,c),n="ALL"==this.value?i(p,c):i(p,c,e(this.value))})});
